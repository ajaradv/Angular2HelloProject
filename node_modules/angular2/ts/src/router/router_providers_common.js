define(["require", "exports", 'angular2/src/router/location_strategy', 'angular2/src/router/path_location_strategy', 'angular2/src/router/router', 'angular2/src/router/route_registry', 'angular2/src/router/location', 'angular2/src/facade/lang', 'angular2/core', 'angular2/src/facade/exceptions'], function (require, exports, location_strategy_1, path_location_strategy_1, router_1, route_registry_1, location_1, lang_1, core_1, exceptions_1) {
    "use strict";
    /**
     * The Platform agnostic ROUTER PROVIDERS
     */
    exports.ROUTER_PROVIDERS_COMMON = lang_1.CONST_EXPR([
        route_registry_1.RouteRegistry,
        lang_1.CONST_EXPR(new core_1.Provider(location_strategy_1.LocationStrategy, { useClass: path_location_strategy_1.PathLocationStrategy })),
        location_1.Location,
        lang_1.CONST_EXPR(new core_1.Provider(router_1.Router, {
            useFactory: routerFactory,
            deps: lang_1.CONST_EXPR([route_registry_1.RouteRegistry, location_1.Location, route_registry_1.ROUTER_PRIMARY_COMPONENT, core_1.ApplicationRef])
        })),
        lang_1.CONST_EXPR(new core_1.Provider(route_registry_1.ROUTER_PRIMARY_COMPONENT, { useFactory: routerPrimaryComponentFactory, deps: lang_1.CONST_EXPR([core_1.ApplicationRef]) }))
    ]);
    function routerFactory(registry, location, primaryComponent, appRef) {
        var rootRouter = new router_1.RootRouter(registry, location, primaryComponent);
        appRef.registerDisposeListener(function () { return rootRouter.dispose(); });
        return rootRouter;
    }
    function routerPrimaryComponentFactory(app) {
        if (app.componentTypes.length == 0) {
            throw new exceptions_1.BaseException("Bootstrap at least one component before injecting Router.");
        }
        return app.componentTypes[0];
    }
});
//# sourceMappingURL=router_providers_common.js.map